<!---------------------------------------------------------------------------------->
<div align="left">
<img src="https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54" height=24> 
<img src="https://img.shields.io/badge/numpy-%23013243.svg?style=for-the-badge&logo=numpy&logoColor=white" height=24>
<img src="https://img.shields.io/badge/pandas-%23150458.svg?style=for-the-badge&logo=pandas&logoColor=white" height=24>
</div>

<h1 align="center">Detector Threshold / Детектор по пороговому значению</h1>

Программа для тестирования и сбора статистики одного из методов дипломной работы бакалавриата, на тему *"Развитие метода автоматизации обработки спектроскопических данных, полученных с использованием спектрометра с фазовой манипуляцией воздействующего на газ излучения"*

<!---------------------------------------------------------------------------------->

---

<h2 align="left"> Содержание </h2>

1. [ Описание задачи и демонстрация работы ](https://github.com/SkorEgor/Test-Difference#-1-описание-задачи-и-демонстрация-работы-)
2. [ Входные и выходные данные ](https://github.com/SkorEgor/Test-Difference#-2-входные-и-выходные-данные-)
3. [ Описание логической структуры - Алгоритм программы ](https://github.com/SkorEgor/Test-Difference#-3-описание-логической-структуры---алгоритм-программы-)

<br><br>
<!---------------------------------------------------------------------------------->

---

<h2 align="left"> 1. Описание задачи и демонстрация работы </h2>

Для оценки работы приложения [Detector-Threshold](https://github.com/SkorEgor/Detector-Threshold) было разработано специальное программное обеспечение для проведения тестов в автоматическом режиме.

- Программа [Detector-Threshold](https://github.com/SkorEgor/Detector-Threshold) находит точки линий поглощения с помощью класса [DataAndProcessing](https://github.com/SkorEgor/Detector-Threshold/blob/master/data_and_processing.py), по данным со спектрометра

Цель программы тестировщика - Вывести статистику, вида:
```C
   всего_верных_частот  найденных_частот  правильно_найденных  неправильно_найденных  порог  спорные частоты  прав/найден (A, %)  прав/всего_верных (B, %)  оптимум (A * B)
0                 51.0              31.0                 21.0                    9.0   25.0              1.0            0.677419                  0.411765         0.278937
1                 51.0               2.0                  2.0                    0.0   50.0              0.0            1.000000                  0.039216         0.039216
2                 51.0               1.0                  1.0                    0.0   75.0              0.0            1.000000                  0.019608         0.019608
3                 51.0               1.0                  1.0                    0.0  100.0              0.0            1.000000                  0.019608         0.019608
```
- Полученная статистика позволит судить об эффективность и наилучшем результате
<div align="center">
<!--- (2) Картинка исходных данных и разницы -->
<img src="https://raw.githubusercontent.com/SkorEgor/picturesgifs-for-readme/RobotControl/Detector-Difference/statistics.jpg" >
</div>
 При оптимальном выборе параметров, программа обнаруживает 33 из 51 линий (~65%), максимальное возможное число найденных линий 48 из 51 (~94%).
<!---------------------------------------------------------------------------------->

---

<h2 align="left"> 2. Входные и выходные данные </h2>

**Входные данные** - Два набора точек спектра, по ~40000 штук.
1.	Набор данные без исследуемого вещества в камере. Получаем константы спектра для каждой частоты
Пример 2 точке спектра (формат файла .csv):
2. Набор данных с исследуемым веществом в камере. Сигнал получается путем сложения сигнала от вещества с константой и шумом.
Выводные данные: точки (координаты) линий поглощения вещества из спектрометра

_Пример входных данных_
```C
Index:	FREQUENCY:	AMPLITUDE:	BIAS:	GAMMA:	Pressure:	TimeMark:
000000001	022000.000	001.346120	-0.306155	7.365150e-07	0.0e+00	00:00:00.000
000000002	022000.075	001.336400	-0.303900	7.293964e-07	0.0e+00	00:00:00.156
***********************************************************
Finish
```
**Выходные данные** - точки (координаты) линий поглощения вещества из спектрометра

_Пример выходных данных_
```C
   всего_верных_частот  найденных_частот  правильно_найденных  неправильно_найденных  порог  спорные частоты  прав/найден (A, %)  прав/всего_верных (B, %)  оптимум (A * B)
0                 51.0              31.0                 21.0                    9.0   25.0              1.0            0.677419                  0.411765         0.278937
1                 51.0               2.0                  2.0                    0.0   50.0              0.0            1.000000                  0.039216         0.039216
2                 51.0               1.0                  1.0                    0.0   75.0              0.0            1.000000                  0.019608         0.019608
3                 51.0               1.0                  1.0                    0.0  100.0              0.0            1.000000                  0.019608         0.019608
```

<!---------------------------------------------------------------------------------->

---

<h2 align="left"> 3. Описание логической структуры - Алгоритм программы </h2>

1. Импортировать класс данных и обработки [ DataAndProcessing ](https://github.com/SkorEgor/Detector-Threshold/blob/master/data_and_processing.py), из приложения [ Detector-Threshold ](https://github.com/SkorEgor/Detector-Threshold)
2. Прочитать и загрузить данные со спектрометра, формата *.csv*, в класс [DataAndProcessing ](https://github.com/SkorEgor/Detector-Threshold/blob/master/data_and_processing.py)
3. Сравнить полученные точки с истинными, записанными в data_for_verification.py
   1. Выбрать значение параметра - порога
   2. С этим параметром запустить обработку
   3. Провести сравнение на совпадение точек и вернуть в виде статистики для заданного порогового значения
   4. Выбрать следующее пороговое значение, перейти на шаг i, пока не переберем все тестируемые значения параметра
4. Вывести общую статистику
